const {openAiClient} = require('../../openAi/init')

module.exports = async (client, message) => {
    if(!message.mentions.users.has(client.user.id)) return;

    const response = await openAiClient.chat.completions.create({
        model: 'gpt-3.5-turbo',
        messages : [
            {
                role: 'system',
                content: 'You are a helpful assistant.'
            },
            {
                role: 'user',
                content: `${message.content}`
            }
        ]
    }).catch((error) => console.log('OpenAI Error ' + error));

    const stringResponse = response.choices[0].message.content;
    message.reply({
        content: stringResponse
    });
}